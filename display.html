<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Medidor de Intensidade</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: radial-gradient(circle at center, #111 0%, #000 100%);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      position: relative;
      overflow: hidden;
    }

    .feedback {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 40px;
      transition: all 0.3s;
      text-align: center;
      text-shadow: 0 0 10px rgba(255,255,255,0.2);
    }

    .multi-meter {
      display: flex;
      gap: 20px;
    }

    .meter-container {
      display: flex;
      flex-direction: column-reverse;
      justify-content: space-between;
      height: 600px;
      width: 80px;
      background-color: #1f1f1f;
      padding: 10px;
      border-radius: 16px;
      box-shadow: 0 0 30px rgba(0, 255, 0, 0.2), inset 0 0 15px rgba(0,0,0,0.6);
      border: 2px solid #444;
      overflow: hidden;
    }

    .bar {
      width: 100%;
      height: calc(100% / 20 - 4px);
      margin: 2px 0;
      background-color: #333;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.5);
      transition: background-color 0.3s, transform 0.3s;
    }

    .bar.active.green { background-color: #00ff00; transform: scale(1.05); }
    .bar.active.yellow { background-color: #ffcc00; transform: scale(1.05); }
    .bar.active.red { background-color: #ff3300; transform: scale(1.05); }

    .stars {
      position: absolute;
      top: 10px;
      font-size: 48px;
      color: #ffff99;
      display: none;
      animation: sparkle 1s ease-in-out forwards;
      text-shadow: 0 0 10px #fff, 0 0 20px #ffd700, 0 0 30px #ffd700;
      pointer-events: none;
      z-index: 10;
    }

    @keyframes sparkle {
      0% { opacity: 0; transform: scale(0.5) rotate(0deg); }
      50% { opacity: 1; transform: scale(1.3) rotate(15deg); }
      100% { opacity: 0; transform: scale(0.5) rotate(-15deg); }
    }
  </style>
</head>
<body>

  <div class="stars" id="stars">âœ¨âœ¨âœ¨</div>
  <div class="feedback" id="feedback">Aguardando...</div>

  <div class="multi-meter" id="multiMeter"></div>

  <script>
    const NUM_BARRAS = 20;
    const NUM_COLUNAS = 3;
    const multiMeter = document.getElementById('multiMeter');

    function criarBarra(index) {
      const div = document.createElement('div');
      div.classList.add('bar');
      if (index < 13) div.classList.add('green');
      else if (index < 17) div.classList.add('yellow');
      else div.classList.add('red');
      return div;
    }

    for (let c = 1; c <= NUM_COLUNAS; c++) {
      const container = document.createElement('div');
      container.classList.add('meter-container');
      container.id = `meter${c}`;
      for (let i = 0; i < NUM_BARRAS; i++) {
        container.appendChild(criarBarra(i));
      }
      multiMeter.appendChild(container);
    }

    const feedback = document.getElementById('feedback');
    const stars = document.getElementById('stars');
    let estrelaAtiva = false;

    function updateMeter(bars, value) {
      bars.forEach((bar, index) => {
        bar.classList.remove('active');
        if (index < value) bar.classList.add('active');
      });
    }

    function atualizarFeedback(valor) {
      if (valor <= 6) {
        feedback.textContent = "DUBLAGEM RUIM ðŸ˜¶";
        feedback.style.color = "#ff4d4d";
      } else if (valor <= 13) {
        feedback.textContent = "DUBLAGEM MÃ‰DIA ðŸ˜";
        feedback.style.color = "#ffaa00";
      } else if (valor < 20) {
        feedback.textContent = "BOA DUBLAGEM ðŸ™‚";
        feedback.style.color = "#00cc66";
      } else if (valor === 20) {
        feedback.textContent = "Ã“TIMA DUBLAGEM ðŸ¤©";
        feedback.style.color = "#00ffcc";
      } else {
        feedback.textContent = "Aguardando...";
        feedback.style.color = "#ffffff";
      }
    }

    function mostrarEstrelas() {
      if (!estrelaAtiva) {
        estrelaAtiva = true;
        stars.style.display = 'block';
        stars.style.animation = 'sparkle 1s ease-in-out forwards';
        setTimeout(() => {
          stars.style.display = 'none';
          estrelaAtiva = false;
        }, 1000);
      }
    }

    setInterval(() => {
      const valor = parseInt(localStorage.getItem('intensidade')) || 0;
      for (let i = 1; i <= NUM_COLUNAS; i++) {
        const barras = document.querySelectorAll(`#meter${i} .bar`);
        updateMeter(barras, valor);
      }
      atualizarFeedback(valor);
      if (valor === 20) mostrarEstrelas();
    }, 200);
  </script>
</body>
</html>
